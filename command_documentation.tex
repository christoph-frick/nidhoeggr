\section{Commands}

\subsection{login}

\begin{description}
\item {\it Description:}\\
Login of the client/user onto the server. This command must be called before all others. This command will assure, that client and server speak the same version of the protocol.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt protocol\_version}: version of the protocol, the client expects
\item {\tt client\_version}: name/version string of the client
\item {\tt client\_uniqid}: some uniq id of the client
\end{itemize}
\item {\it Result:}\\
The reply contains 4 cells: protocol version, server version, client id for further requests, ip the connection came from.
\end{description}

\subsection{distributedlogin}

\begin{description}
\item {\it Description:}\\
This command is only distributed to the other race list servers; its similar to the Login command but contains the client\_id the client got assigned from the server
\item {\it Parmameters:}
\begin{itemize}
\item {\tt client\_id}: the client\_id a client got assigned from the server it logged in
\item {\tt protocol\_version}: version of the protocol, the client expects
\item {\tt client\_version}: name/version string of the client
\item {\tt client\_uniqid}: some uniq id of the client
\end{itemize}
\item {\it Result:}\\
Nothing
\end{description}

\subsection{req\_full}

\begin{description}
\item {\it Description:}\\
Returns a list of races and the drivers in this races.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt client\_id}: 
\end{itemize}
\item {\it Result:}\\
The complete current racelist. Each line holds either a race or following the drivers of a race. Each line starts either with a cell containing R or D. Races consist of the following: 
		
	R, 
	server\_id, 
	ip, 
	joinport, 
	name, 
	info1, 
	info2, 
	comment, 
	isdedicatedserver, 
	ispassworded, 
	isbosspassworded, 
	isauthenticedserver, 
	allowedchassis, 
	allowedcarclasses, 
	allowsengineswapping, 
	modindent, 
	maxlatency, 
	bandwidth, 
	players,
	maxplayers, 
	trackdir, 
	racetype, 
	praclength, 
	sessionleft, 
	sessiontype,
	aiplayers,
	numraces,
	repeatcount,
	flags


	The drivers contain this data:

	D,
	firstname,
	lastname,
	class\_id,
	team\_id,
	mod\_id,
	nationality,
	helmet\_colour,
	qualifying\_time,
	race\_position,
	race\_laps,
	race\_notes
	
\end{description}

\subsection{host}

\begin{description}
\item {\it Description:}\\
Starts hosting of a race. The given informations are used to describe the race and will be displayed in the same order in the racelist.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt client\_id}: 
\item {\tt joinport}: 
\item {\tt name}: 
\item {\tt info1}: 
\item {\tt info2}: 
\item {\tt comment}: 
\item {\tt isdedicatedserver}: 
\item {\tt ispassworded}: 
\item {\tt isbosspassworded}: 
\item {\tt isauthenticedserver}: 
\item {\tt allowedchassis}: 
\item {\tt allowedcarclasses}: 
\item {\tt allowsengineswapping}: 
\item {\tt modindent}: 
\item {\tt maxlatency}: 
\item {\tt bandwidth}: 
\item {\tt maxplayers}: 
\item {\tt trackdir}: 
\item {\tt racetype}: 
\item {\tt praclength}: 
\item {\tt aiplayers}: 
\item {\tt numraces}: 
\item {\tt repeatcount}: 
\item {\tt flags}: 
\item {\tt firstname}: 
\item {\tt lastname}: 
\item {\tt class\_id}: 
\item {\tt team\_id}: 
\item {\tt mod\_id}: 
\item {\tt nationality}: 
\item {\tt helmet\_colour}: 
\end{itemize}
\item {\it Result:}\\
A unique id for the server, that will be used to update the hosting and race informations and also by the clients to join/leave the race and the IP address the request came from
\end{description}

\subsection{distributedhost}

\begin{description}
\item {\it Description:}\\
This command is only distributed to the other race list servers; its similar to the Host command but contains the server\_id the hosting client got assigned from the server
\item {\it Parmameters:}
\begin{itemize}
\item {\tt server\_id}: 
\item {\tt client\_id}: 
\item {\tt joinport}: 
\item {\tt name}: 
\item {\tt info1}: 
\item {\tt info2}: 
\item {\tt comment}: 
\item {\tt isdedicatedserver}: 
\item {\tt ispassworded}: 
\item {\tt isbosspassworded}: 
\item {\tt isauthenticedserver}: 
\item {\tt allowedchassis}: 
\item {\tt allowedcarclasses}: 
\item {\tt allowsengineswapping}: 
\item {\tt modindent}: 
\item {\tt maxlatency}: 
\item {\tt bandwidth}: 
\item {\tt maxplayers}: 
\item {\tt trackdir}: 
\item {\tt racetype}: 
\item {\tt praclength}: 
\item {\tt aiplayers}: 
\item {\tt numraces}: 
\item {\tt repeatcount}: 
\item {\tt flags}: 
\item {\tt firstname}: 
\item {\tt lastname}: 
\item {\tt class\_id}: 
\item {\tt team\_id}: 
\item {\tt mod\_id}: 
\item {\tt nationality}: 
\item {\tt helmet\_colour}: 
\end{itemize}
\item {\it Result:}\\
Nothing
\end{description}

\subsection{join}

\begin{description}
\item {\it Description:}\\
The client with the given id joins the server with the given id. Several informations about the driver itself are also submited for the list of races and their drivers.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt server\_id}: 
\item {\tt client\_id}: 
\item {\tt firstname}: 
\item {\tt lastname}: 
\item {\tt class\_id}: 
\item {\tt team\_id}: 
\item {\tt mod\_id}: 
\item {\tt nationality}: 
\item {\tt helmet\_colour}: 
\end{itemize}
\item {\it Result:}\\
Nothing.
\end{description}

\subsection{leave}

\begin{description}
\item {\it Description:}\\
Removes the client with the given id from the server with the given id.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt server\_id}: 
\item {\tt client\_id}: 
\end{itemize}
\item {\it Result:}\\
Nothing.
\end{description}

\subsection{endhost}

\begin{description}
\item {\it Description:}\\
Stops the hosting of the race with the given id.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt server\_id}: 
\item {\tt client\_id}: 
\end{itemize}
\item {\it Result:}\\
Nothing.
\end{description}

\subsection{broadcast}

\begin{description}
\item {\it Description:}\\
Broadcast from a race server.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt version}: 
\item {\tt joinport}: 
\item {\tt name}: 
\item {\tt trackdir}: 
\item {\tt cardir}: 
\item {\tt players}: 
\item {\tt maxplayers}: 
\item {\tt racetype}: 
\item {\tt classes}: 
\item {\tt sessiontype}: 
\item {\tt sessionleft}: 
\item {\tt ispassworded}: 
\item {\tt maxlatency}: 
\end{itemize}
\item {\it Result:}\\
none.
\end{description}

\subsection{report}

\begin{description}
\item {\it Description:}\\
Updates the informations of the given server.
\item {\it Parmameters:}
\begin{itemize}
\item {\tt server\_id}: 
\end{itemize}
\item {\it Result:}\\
Nothing.
\end{description}

\subsection{rls\_register}

\begin{description}
\item {\it Description:}\\
Registers a race list server for the reproduction
\item {\it Parmameters:}
\begin{itemize}
\item {\tt protocol\_version}: version of the protocol, the server expects
\item {\tt rls\_id}: 
\item {\tt name}: 
\item {\tt port}: 
\item {\tt maxload}: 
\end{itemize}
\item {\it Result:}\\
List of the known race list servers
\end{description}

\subsection{rls\_unregister}

\begin{description}
\item {\it Description:}\\
Removes the race list server from the known servers
\item {\it Parmameters:}
\begin{itemize}
\item {\tt rls\_id}: 
\end{itemize}
\item {\it Result:}\\
Nothing
\end{description}

\subsection{rls\_update}

\begin{description}
\item {\it Description:}\\
A list of all updates from a certain server
\item {\it Parmameters:}
\begin{itemize}
\item {\tt rls\_id}: 
\item {\tt current\_load}: 
\end{itemize}
\item {\it Result:}\\
List of all requests on this server since the last call of this function
\end{description}

\subsection{rls\_fullupdate}

\begin{description}
\item {\it Description:}\\
Complete list of all data from the server; this is used after the registration to get the complete data from the choosen master
\item {\it Parmameters:}
\begin{itemize}
\item {\tt rls\_id}: 
\end{itemize}
\item {\it Result:}\\
All Users, Races and their Drivers on this server
\end{description}

\subsection{copyright}

\begin{description}
\item {\it Description:}\\
Returns a copyright notice about the protocol and the server.
\item {\it Parmameters:}
\begin{itemize}
\item None
\end{itemize}
\item {\it Result:}\\
String holding the text of the copyright notice.
\end{description}

\subsection{help}

\begin{description}
\item {\it Description:}\\
Returns a list of all implemented commands.
\item {\it Parmameters:}
\begin{itemize}
\item None
\end{itemize}
\item {\it Result:}\\
For each command a line starting with command, then followed by a line for each param and finally a line starting with result, explaining the data sent back to the client.
\end{description}

